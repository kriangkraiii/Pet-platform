<!-- src/main/resources/templates/pet.html -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">

<head>
	<meta charset="UTF-8">
	<title>My Pets</title>
</head>

<body>
	<section>
		
		<div class="container profile-card">
			<!-- ✅ success / error message -->
			<div th:if="${session.succAddPetMsg}" class="alert alert-success mt-2" th:text="${session.succAddPetMsg}">
			</div>
			<div th:if="${session.errorAddPetMsg}" class="alert alert-danger mt-2" th:text="${session.errorAddPetMsg}">
			</div>

			<!-- ✅ button to add a new pet -->
			<div class="justify-content-end mt-3 mb-3">
				<a href="/user/pet/add" class="btn btn-primary">Add New Pet</a>

			<!--                         -->


			<!-- My Pets Section -->
			<h2>My Pets</h2>
			<div th:if="${noPetsMsg}" class="alert alert-info" th:text="${noPetsMsg}"></div>

			<div class="row" th:if="${pets}">

				<div class="card-md-4 mb-3" th:each="pet : ${pets}">
					<div class="card shadow-sm">
						<div class="row g-0">
							<!-- Pet image on the left -->
							<div class="col-md-4">
								<img th:if="${pet.imagePet}" th:src="@{'/img/pet_img/' + ${pet.imagePet}}" class="img-fluid rounded-start"
									alt="Pet Image" style="height:100%; object-fit:cover;">
							</div>

							<!-- Pet details on the right -->
							<div class="col-md-8">
								<div class="card-body">
									<h5 class="card-title" th:text="${pet.name}"></h5>
									<p class="card-text">
										<strong>Type:</strong> <span th:text="${pet.type}"></span><br>
										<strong>Breed:</strong> <span th:text="${pet.breed}"></span><br>
										<!--<strong>Age:</strong> <span th:text="${pet.age}"></span> years<br>-->
										<strong>Description:</strong> <span th:text="${pet.description}"></span>
									</p>
									<!-- Buttons -->
									<div class="d-flex justify-content-between">
										<a th:href="@{'/user/pet/edit/' + ${pet.id}}"
											style="text-decoration: underline;">Edit</a>

											<!-- View Profile -->
											<a th:href="@{'/community/pet/' + ${pet.id}}"
											class="btn btn-sm btn-primary"> <i class="fas fa-eye"></i>
											View Profile
											</a>
											
										<form th:action="@{'/user/pet/delete/' + ${pet.id}}" method="post">
											<button type="submit" style="text-decoration: underline;"
												onclick="return confirm('Are you sure you want to delete this pet?')">Delete</button>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>


		</div>
	</section>
</body>

</html>